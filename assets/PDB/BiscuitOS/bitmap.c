


         2-level Page Table

         32                      22                     12                     0
         +-----------------------+----------------------+----------------------+
         |       Directory       |        Table         |        Offset        |
         +-----------------------+----------------------+----------------------+
                                 | <-------------- PGDIR_SHIFT --------------> |
                                                        | <--- PAGE_SHIFT ---> |







         2-level Page Table

         32                      22                     12                     0
         +-----------------------+----------------------+----------------------+
         |       Directory       |        Table         |        Offset        |
         +-----------------------+----------------------+----------------------+
                    |            | <-------------- PGDIR_SHIFT --------------> |
                    |                                   | <--- PAGE_SHIFT ---> |
                    |
                    |            +---------------+
                    |            |               |
                    |            +---------------+
                    |            |               |
                    o----------->+---------------+
                                 |               |
                                 +---------------+
                                 |               |
                                 +---------------+
                                 |               |
                                 +---------------+
                                 |               |
                                 +---------------+
                                 |               |
       task_struct->mm->pgd ---> +---------------+





         2-level Page Table

         32                      22                     12                     0
         +-----------------------+----------------------+----------------------+
         |       Directory       |        Table         |        Offset        |
         +-----------------------+----------------------+----------------------+
                    |            | <-------------- PGDIR_SHIFT --------------> |
                    |                                   | <--- PAGE_SHIFT ---> |
                    |
                    |            +---------------+
                    |            |               |
                    |            +---------------+
                    |            |               |
                    o----------->+---------------+
                                 |               |
                                 +---------------+
                                 |               |
                                 +---------------+
                                 |               |
                                 +---------------+
                                 |               |
                                 +---------------+
                                 |               |
       init_mm->pgd -----------> +---------------+






              pgd                     pte
       |                |
       +----------------+
       |                |
       +----------------+
       |                |          +----------------+ +0
       +----------------+          |   Linux pt 0   |
       |                |          +----------------+ +1024
       +----------------+ +0       |   Linux pt 1   |
       |                |--------->+----------------+ +2048
       +----------------+ +4       |    h/w pt 0    |
       |                |--------->+----------------+ +3072
       +----------------+ +8       |    h/w pt 1    |
       |                |          +----------------+ +4096
       +----------------+
       |                |










